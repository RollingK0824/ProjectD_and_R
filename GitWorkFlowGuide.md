# Project_D_and_R Git 워크플로우 Guide

2인 프로젝트는 팀 규모가 작지만, 효율적인 협업과 문제 발생 시 빠른 해결을 위해 체계적인 Git 워크플로우가 중요함. 특히 유니티 프로젝트는 씬(Scene)이나 프리팹(Prefab) 같은 바이너리 파일이나 YAML 기반 파일이 많아서 충돌 관리가 까다로울 수 있음.

가장 추천하는 방식은 **"Feature Branching" (기능 브랜치) 전략**을 기반으로 함.

## 1. 브랜치 전략

핵심 브랜치는 2개, 작업 브랜치는 기능별로 무수히 많이 사용.

* `main` (or `master`) 브랜치:
    * **역할:** 항상 **가장 안정적인 최신 릴리스 버전**을 유지하는 브랜치. 배포 가능한 코드만 존재해야 함.
    * **관리:** `develop` 브랜치에서 통합된 코드가 충분히 안정적이라고 판단될 때만 `main`으로 병합(Merge)함. Hotfix(긴급 버그 수정) 외에는 직접 커밋하지 않음.

* `develop` (or `dev`) 브랜치:
    * **역할:** 모든 기능 개발이 통합되는 **메인 개발 브랜치.** 최신 개발 상황을 반영하며, 기능 브랜치들이 이 브랜치로 병합됨.
    * **관리:** `main` 브랜치보다는 불안정할 수 있지만, 항상 테스트가 가능한 상태를 유지하도록 노력함.

* `feature/기능이름` (또는 `fix/버그이름`, `refactor/내용`) 브랜치:
    * **역할:** 특정 **새로운 기능 개발, 버그 수정, 리팩토링 등 하나의 논리적 작업 단위**를 위한 브랜치. 짧은 기간 동안만 유지되는 단명(short-lived) 브랜치여야 함.
    * **생성:** 항상 `develop` 브랜치에서 파생(checkout)함.
    * **이름 규칙:** `feature/player-movement`, `fix/ui-button-bug`, `refactor/combat-system` 등 명확하고 설명적인 이름을 사용. 앞선 커밋 컨벤션의 `<type>`을 활용하는 것도 좋은 방법.
    * **관리:** 작업 완료 후 `develop`으로 풀 리퀘스트(PR)를 보내 병합하고, 병합이 완료되면 삭제함.

---

## 2. Git 워크플로우 (브랜치, 커밋, 푸시, 풀 리퀘스트)

전반적인 개발 과정은 다음과 같음.

1.  **새로운 기능/버그 수정 시작 전:**
    * 항상 `develop` 브랜치로 이동하여 최신 상태를 `pull` 받음.
        ```bash
        git checkout develop
        git pull origin develop
        ```
    * `develop`에서 새로운 기능 브랜치를 생성하고 이동.
        ```bash
        git checkout -b feature/implement-jump
        ```
        (예시: 플레이어 점프 기능 구현)

2.  **개발 및 커밋:**
    * 새로운 기능 브랜치에서 코드를 개발.
    * **아주 작은 단위로 자주 커밋.** 하나의 커밋은 하나의 논리적인 변경 단위여야 함.
    * **커밋 컨벤션 철저히 준수:** `feat:`, `fix:`, `refactor:` 등의 타입을 사용하고 제목과 본문을 명확하게 작성.
    * **유니티 특이사항 주의:** 에셋(`*.unity`, `*.prefab`, `*.asset` 등)을 수정했다면, 반드시 `.meta` 파일도 함께 커밋해야 함.
        ```bash
        # 파일 수정/추가 후
        git add .
        git commit -m "feat: add basic player jump animation trigger"
        ```

3.  **푸시 (Push):**
    * **작업 중에도 자주 푸시!** 로컬에만 커밋을 쌓아두지 않음. 만약 로컬 PC에 문제가 생겨도 작업 내용을 잃지 않음.
    * 푸시 시, 현재 작업 중인 기능 브랜치로 푸시.
        ```bash
        git push origin feature/implement-jump
        ```

4.  **풀 리퀘스트 (Pull Request, PR) 생성:**
    * 기능 개발이 완료되거나, 중간에 다른 팀원의 피드백이 필요한 경우 GitHub에서 풀 리퀘스트를 생성.
    * **소스 브랜치:** `feature/implement-jump` (현재 작업 중인 브랜치)
    * **타겟 브랜치 (Base branch):** `develop` (개발 통합 브랜치)
    * **PR 제목:** 해당 PR이 포함하는 주요 기능이나 변경 사항을 나타냄 (예: `feat: 플레이어 점프 기능 구현 완료`).
    * **PR 설명:** 해당 PR에서 어떤 작업을 했는지, 왜 이 기능이 필요한지, 어떤 문제가 해결되었는지 등 자세히 작성. 관련 커밋 컨벤션에 따라 작성된 커밋 메시지들을 요약하여 설명하면 좋음.
    * **리뷰어 지정:** 다른 팀원에게 코드 리뷰를 요청함.

5.  **코드 리뷰 및 반영:**
    * 리뷰어는 PR의 코드를 검토하고 피드백을 제공.
    * 피드백에 따라 코드를 수정하고, 수정 사항을 다시 커밋하고 푸시 (새로운 커밋을 만들거나, `git commit --amend`로 마지막 커밋을 수정할 수 있음. 하지만 푸시된 커밋은 `amend` 후 `push --force` 해야 하므로 신중).
    * 수정 사항 푸시 시 PR은 자동으로 업데이트됨.
    * 모든 피드백이 반영되고 승인(Approve)되면, PR을 `develop` 브랜치로 병합(Merge).
    * **병합 방식:** GitHub에서 PR 병합 시 **"Squash and merge"**를 추천함.
        * 장점: 기능 브랜치의 여러 자잘한 커밋들을 하나의 깔끔한 커밋으로 압축하여 `develop` 브랜치에 병합. `develop` 브랜치의 커밋 히스토리가 훨씬 간결하고 가독성이 높아짐.
        * 단점: 기능 브랜치의 개별 커밋 히스토리는 `develop`에는 남지 않지만, 이는 PR 상세 페이지에서 언제든 확인할 수 있음.
    * 병합 후에는 사용했던 `feature/implement-jump` 브랜치를 삭제함.

---

## 3. 유니티 프로젝트를 위한 추가 조언

* **`.meta` 파일 관리:** 유니티는 에셋을 생성/수정할 때 `.meta` 파일을 자동으로 생성함. 이 파일들은 에셋의 고유 ID와 설정 정보를 포함하므로, **절대 `.gitignore`에 넣지 말고 항상 에셋과 함께 커밋해야 함.**
* **씬(Scene) 및 프리팹(Prefab) 충돌 관리:**
    * **최대화:** 한 명이 특정 씬이나 프리팹을 수정할 때 다른 팀원은 그 부분을 건드리지 않는 것이 가장 좋음.
    * **분할 작업:** 가능하다면, 각자 다른 씬이나 프리팹의 다른 부분을 작업하도록 역할을 분담.
    * **잦은 통합:** `develop` 브랜치에서 자주 `pull` 받아 자신의 기능 브랜치에 통합(merge)하는 습관을 들이면 큰 충돌을 예방할 수 있음.
    * **충돌 발생 시:** 유니티의 씬/프리팹 파일은 Git에서 충돌이 나면 수동으로 해결하기 매우 까다로울 수 있음.
        * **Git LFS (Large File Storage) 활용:** 대용량 에셋(모델, 텍스처, 사운드 등)은 반드시 Git LFS로 관리해야 함. 리포지토리 크기를 줄이고, Git 작업 속도를 높임.
        * **수동 병합 도구 활용:** `git mergetool`을 사용하거나, Unity Collaborate(유료) 같은 유니티 자체 협업 툴을 활용할 수도 있음.
        * **소통:** 가장 중요한 것은 충돌 발생 시 **바로 다른 팀원에게 알리고 함께 해결**하는 것. Discord나 Slack 같은 소통 채널을 적극 활용.

* **`.gitignore` 설정:** 유니티 프로젝트에 맞는 `.gitignore` 파일을 꼭 사용해야 함. Unity Technologies에서 제공하는 기본 `.gitignore` 템플릿을 사용하는 것이 좋음. (예시: `Library/`, `Temp/`, `obj/` 등은 Git에서 제외)

---

## 4. 핵심 요약 (2인 팀에게 특히 중요)

1.  **명확한 브랜치 역할:** `main` (릴리스), `develop` (통합), `feature/` (개별 기능 개발).
2.  **작은 단위 커밋 & 잦은 푸시:** 작업 내용을 자주 기록하고 공유하여 문제 발생 시 손실 최소화.
3.  **커밋 컨벤션 준수:** 커밋 메시지를 통해 변경 내용 명확히 전달.
4.  **풀 리퀘스트 활용:** 코드 리뷰를 통해 코드 품질을 높이고, 변경 사항을 투명하게 공유. `Squash and merge`로 깔끔한 히스토리 유지.
5.  **적극적인 소통:** 특히 Unity 에셋 충돌 시에는 바로바로 팀원과 이야기하여 함께 해결.
